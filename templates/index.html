<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ARCS Control</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>

<body>
    <div class="container">
        <div class="header">
            <div class="connection-dot" id="connection-dot"></div>
            <h1>ARCS</h1>
            <a href="/ai" class="btn"
                style="background: #333; color: white; text-decoration: none; padding: 5px 10px; border-radius: 4px; font-size: 0.8em; margin-left: 10px;">ü§ñ
                AI Mode</a>

            <!-- TTS & Speed Controls -->
            <div style="display: inline-flex; align-items: center; gap: 10px; margin-left: auto;">
                <div
                    style="display: flex; flex-direction: column; gap: 5px; padding: 5px 10px; background: #2a2a2a; border-radius: 4px;">
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <label style="font-size: 0.8em; color: #aaa; margin: 0;">üîä TTS</label>
                        <input type="text" id="tts-text" placeholder="Test message..."
                            style="padding: 4px 8px; background: #1a1a1a; border: 1px solid #444; border-radius: 3px; color: white; font-size: 0.75em; width: 150px;">
                        <button id="tts-speak-btn" class="btn"
                            style="background: #4CAF50; color: white; padding: 4px 10px; border: none; border-radius: 3px; cursor: pointer; font-size: 0.75em;">Speak</button>
                    </div>
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <label style="font-size: 0.7em; color: #888; margin: 0; width: 45px;">üöó Speed:</label>
                        <input type="range" id="wheel-speed" min="1000" max="20000" value="10000" step="100"
                            style="width: 120px; accent-color: #FF9800;">
                        <span id="wheel-speed-value"
                            style="font-size: 0.7em; color: #aaa; min-width: 55px; font-weight: bold;">10000</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="panels">
            <!-- Drive Mode Panel (Left) -->
            <div class="panel drive-panel" id="drive-panel">
                <div class="panel-header">
                    <span class="panel-icon">üöó</span>
                    <span class="panel-title">Drive</span>
                    <div class="mode-indicator" id="drive-indicator"></div>
                </div>
                <div class="video-container" id="video-container">
                    <img id="video-feed" src="/video_feed" alt="Robot Camera Feed">
                    <div class="video-overlay"></div>

                    <div class="crosshair">
                        <div class="crosshair-ring">
                            <div class="crosshair-dot"></div>
                        </div>
                        <div class="crosshair-line h left"></div>
                        <div class="crosshair-line h right"></div>
                        <div class="crosshair-line v top"></div>
                        <div class="crosshair-line v bottom"></div>
                    </div>

                    <div class="click-prompt" id="drive-prompt">
                        <h2>üñ±Ô∏è Click to Drive</h2>
                        <p>Mouse controls head ‚Ä¢ WASD moves robot</p>
                    </div>

                    <!-- Status overlay -->
                    <div class="status-overlay">
                        <div class="status-dot" id="status-dot"></div>
                        <span class="status-text" id="status-text">Loading...</span>
                    </div>

                    <!-- Body direction compass -->
                    <div class="body-compass">
                        <div class="compass-ring">
                            <span class="compass-n">‚ñ≤</span>
                            <div class="compass-arrow" id="compass-arrow"></div>
                            <div class="compass-center"></div>
                        </div>
                        <span class="compass-label">Body ‚Üí</span>
                    </div>
                </div>
            </div>

            <!-- Arm Mode Panel (Right) -->
            <div class="panel arm-panel" id="arm-panel">
                <div class="panel-header">
                    <span class="panel-icon">ü¶æ</span>
                    <span class="panel-title">Arm</span>
                    <div class="mode-indicator" id="arm-indicator"></div>
                </div>
                <div class="arm-container" id="arm-container">
                    <!-- Arm visualization -->
                    <div class="arm-visual">
                        <svg viewBox="0 0 200 200" class="arm-svg">
                            <!-- Base -->
                            <circle cx="100" cy="180" r="20" class="arm-base" />
                            <!-- Upper arm -->
                            <line id="arm-upper" x1="100" y1="180" x2="100" y2="120" class="arm-segment" />
                            <!-- Forearm -->
                            <line id="arm-forearm" x1="100" y1="120" x2="100" y2="60" class="arm-segment" />
                            <!-- Wrist -->
                            <line id="arm-wrist" x1="100" y1="60" x2="100" y2="40" class="arm-segment arm-wrist" />
                            <!-- Gripper -->
                            <g id="arm-gripper" transform="translate(100, 30)">
                                <line x1="-8" y1="0" x2="-8" y2="15" class="gripper-finger" />
                                <line x1="8" y1="0" x2="8" y2="15" class="gripper-finger" />
                            </g>
                            <!-- Joints -->
                            <circle cx="100" cy="180" r="6" class="arm-joint" />
                            <circle cx="100" cy="120" r="5" class="arm-joint" />
                            <circle cx="100" cy="60" r="4" class="arm-joint" />
                        </svg>

                        <!-- Arm position display -->
                        <div class="arm-info">
                            <div class="arm-stat">
                                <span class="stat-label">Pan</span>
                                <span class="stat-value" id="arm-pan">0¬∞</span>
                            </div>
                            <div class="arm-stat">
                                <span class="stat-label">Reach</span>
                                <span class="stat-value" id="arm-reach">0¬∞</span>
                            </div>
                            <div class="arm-stat">
                                <span class="stat-label">Wrist</span>
                                <span class="stat-value" id="arm-wrist-val">0¬∞</span>
                            </div>
                        </div>
                    </div>

                    <div class="click-prompt" id="arm-prompt">
                        <h2>üñ±Ô∏è Click to Control Arm</h2>
                        <p>Mouse moves arm ‚Ä¢ Scroll rotates wrist</p>
                        <p class="sub">Hold click to close gripper</p>
                    </div>

                    <!-- Arm controls hint -->
                    <div class="arm-controls-hint">
                        <div class="hint-row">
                            <kbd>Q</kbd><kbd>E</kbd> Rotate base
                        </div>
                        <div class="hint-row">
                            <kbd>T</kbd><kbd>G</kbd> Elbow
                        </div>
                        <div class="hint-row">
                            <kbd>R</kbd><kbd>F</kbd> Wrist flex
                        </div>
                        <div class="hint-row">
                            <kbd>H</kbd> Home position
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="debug-panel" id="debug-panel"></div>
    </div>

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>

</html>